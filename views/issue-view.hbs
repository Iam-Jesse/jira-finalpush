{{!< layout}}
<div class="wrapper">
  <form id="custom-form">
        {{#each result}}
            <h3 class="headers">{{this.ownerTitle}}</h3>
            {{#each this.fieldContent}}
                <div>
                    <input type="checkbox" name="value" value="{{this._id}}" "{{#if this.status}}checked{{else}}{{/if}}">
                    <label for="value" class="normal-text">{{this.value}}</label>
                </div>
            {{/each}}
        {{/each}}
        <input type="hidden" value="{{id}}" id="hidden-input">
        <button type="submit" class="aui-button aui-button-primary all-buttons">Save</button>
    </form>
</div>

<script>
  const pageUrl = window.location.href;
  const baseUrl = `${pageUrl.split('ngrok.io')[0]}ngrok.io`;
  const id = document.querySelector('#hidden-input').value;
  const url = `${baseUrl}/issue/${id}`;
  
  const form = document.querySelector('#custom-form');
  const formElems = form.elements;
  let allInputs = {};
  
  for(let i = 0 ; i < formElems.length ; i++){
      let item = formElems.item(i);
      allInputs[item.name] = item.value;
  }

  
  // formElems.forEach(element => {
  //   if(element.name.includes('input')){
  //     allInputs.push(element);
  //   }
  // });
  
  form.addEventListener('submit', async function (e) {
    e.preventDefault();
    // console.log(formElems);
    
    console.log(allInputs);
    
    // fetch(url, {
    // method: 'POST',
    // body: new FormData(form)
    // })
    // .then(response => response.json())
    // .then(data => console.log(data))
    // .catch(error=> {
    //   //handle error
    //   console.log(error);
    // });
  });

</script>
    
